<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>PWC Map Starter</title>

  <script type="module" src="/build/pwc-leaflet-text.esm.js"></script>
  <script nomodule src="/build/pwc-leaflet-text.js"></script>
  <script type="module"
    src="https://unpkg.com/@paraboly/pwc-tooltip@latest/dist/pwc-tooltip/pwc-tooltip.esm.js"></script>

</head>
<style>
  body {
    background-color: #eee;
    margin: 0 auto;
    padding: 0;
    height: 100vh;
    overflow: hidden;
  }

  pwc-map {
    display: block;
    height: 100%;
    width: 100%;
  }

  .pwc-custom-control pwc-tooltip {
    line-height: 38px;
  }
</style>

<body>
  <pwc-map>
  </pwc-map>
  <pwc-map-controls>

  </pwc-map-controls>

  <script>
    const secondShape =
    {
      "type": "pwc-editable-text",
      "created": "2019-12-04T21:20:06.986Z",
      "updated": "2019-12-04T21:21:56.679Z",
      "geometry": {
        "type": "Feature",
        "properties": {
          "name": "Metu",
          "color": "#686928",
          "fontSize": "11px"
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            32.76123,
            39.888665
          ]
        }
      }
    };
    const firstShape = {
      "type": "pwc-editable-text",
      "created": "2019-12-04T21:17:41.862Z",
      "updated": "2019-12-04T21:17:46.905Z",
      "geometry": {
        "type": "Feature",
        "properties": {
          "name": "Ankara",
          "fontSize": "16px",
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            32.653427,
            39.992378
          ]
        }
      }
    };

    const pwcMapControls = document.querySelector("pwc-map-controls");
    const geometry = [firstShape.geometry, secondShape.geometry];
    /**
    * We should wait till the web component ready
    */
    customElements.whenDefined('pwc-map').then(() => {
      const pwcMap = document.querySelector("pwc-map");

      /**
      * Get map instance
      */
      pwcMap.getMap().then((map) => {
        /**
        * Initialize pwc map controls with given map instance
        */
        pwcMapControls.initialize({ map: map.instance }, geometry);
      });
    });

    pwcMapControls.addEventListener("actions", (payload) => { console.log(payload.detail.action); console.log(JSON.stringify(payload.detail.data)) });
  </script>
</body>

</html>
