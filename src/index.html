<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>PWC Map Starter</title>

  <script type="module" src="/build/pwc-leaflet-text.esm.js"></script>
  <script nomodule src="/build/pwc-leaflet-text.js"></script>
  <script type="module"
    src="https://unpkg.com/@paraboly/pwc-tooltip@latest/dist/pwc-tooltip/pwc-tooltip.esm.js"></script>

</head>
<style>
  body {
    background-color: #eee;
    margin: 0 auto;
    padding: 0;
    height: 100vh;
    overflow: hidden;
  }

  pwc-map {
    display: block;
    height: 100%;
    width: 100%;
  }

  .pwc-custom-control pwc-tooltip {
    line-height: 38px;
  }
</style>

<body>
  <pwc-map>
  </pwc-map>
  <pwc-map-controls>

  </pwc-map-controls>

  <script>
    const secondShape =
    {
      "geometry": {
        "type": "Feature",
        "properties": {
          "name": "Metu2",
          "shapeProps": {
            "color": "#686928",
            "fontSize": "11px",
            "transform": "rotate(-0.72353rad)"
          },
          "pwcProps": {
            "type": "PwcTextControl",
            "created": "2019-12-04T21:20:06.986Z",
            "updated": "2019-12-04T21:21:56.679Z",
          }
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            32.76123,
            39.888665
          ]
        }
      }
    };
    const firstShape = {
      "geometry": {
        "type": "Feature",
        "properties": {
          "name": "AnkaraKonya",
          "shapeProps": {
            "color": "#3f51b5",
            "backgroundColor": "#f44336",
            "fontSize": "24px"
          },
          "pwcProps": {
            "type": "PwcTextControl",
            "created": "2019-12-04T21:17:41.862Z",
            "updated": "2019-12-04T21:17:46.905Z",
          }
        },
        "geometry": {
          "type": "Point",
          "coordinates": [
            32.653427,
            39.992378
          ]
        }
      }
    };

    const polyLine = {
      "type": "LineString",
      "coordinates": [
        [
          32.661662,
          39.883401
        ],
        [
          32.662373,
          39.883894
        ],
        [
          32.664756,
          39.885545
        ],
        [
          32.66541,
          39.885995
        ],
        [
          32.665669,
          39.886184
        ],
        [
          32.666077,
          39.886465
        ],
        [
          32.668049,
          39.887844
        ],
        [
          32.670175,
          39.88927
        ],
        [
          32.670658,
          39.889612
        ],
        [
          32.673561,
          39.891377
        ],
        [
          32.674826,
          39.892132
        ],
        [
          32.675752,
          39.892605
        ],
        [
          32.677617,
          39.893765
        ],
        [
          32.678004,
          39.893996
        ],
        [
          32.678698,
          39.894417
        ],
        [
          32.678976,
          39.894568
        ],
        [
          32.67914,
          39.894674
        ],
        [
          32.679299,
          39.894798
        ],
        [
          32.679341,
          39.894814
        ],
        [
          32.679421,
          39.894852
        ],
        [
          32.679447,
          39.894882
        ],
        [
          32.679467,
          39.894927
        ],
        [
          32.679429,
          39.894992
        ],
        [
          32.679333,
          39.895076
        ],
        [
          32.679271,
          39.8951
        ],
        [
          32.679082,
          39.895226
        ],
        [
          32.678678,
          39.895509
        ],
        [
          32.677144,
          39.896915
        ],
        [
          32.676466,
          39.897461
        ],
        [
          32.676113,
          39.897763
        ],
        [
          32.675703,
          39.898181
        ],
        [
          32.675616,
          39.898304
        ],
        [
          32.675637,
          39.898529
        ],
        [
          32.675916,
          39.899115
        ],
        [
          32.676419,
          39.899627
        ],
        [
          32.676556,
          39.899784
        ],
        [
          32.67714,
          39.900413
        ],
        [
          32.677566,
          39.90087
        ],
        [
          32.678151,
          39.90137
        ],
        [
          32.678525,
          39.901637
        ],
        [
          32.679061,
          39.901964
        ],
        [
          32.679614,
          39.902243
        ],
        [
          32.681244,
          39.902913
        ],
        [
          32.681892,
          39.903219
        ],
        [
          32.682515,
          39.903544
        ],
        [
          32.682823,
          39.903763
        ],
        [
          32.683114,
          39.904
        ],
        [
          32.68342,
          39.904311
        ],
        [
          32.68363,
          39.904571
        ],
        [
          32.684591,
          39.906134
        ],
        [
          32.68483,
          39.906453
        ],
        [
          32.685163,
          39.906765
        ],
        [
          32.688485,
          39.908803
        ],
        [
          32.689878,
          39.909608
        ],
        [
          32.690453,
          39.90989
        ],
        [
          32.690886,
          39.910081
        ],
        [
          32.691453,
          39.910288
        ],
        [
          32.692409,
          39.910528
        ],
        [
          32.693189,
          39.910629
        ],
        [
          32.695213,
          39.91077
        ],
        [
          32.699498,
          39.911069
        ],
        [
          32.699787,
          39.911089
        ],
        [
          32.700136,
          39.91111
        ],
        [
          32.702162,
          39.911235
        ],
        [
          32.705468,
          39.911454
        ],
        [
          32.707434,
          39.911553
        ],
        [
          32.709362,
          39.91158
        ],
        [
          32.709891,
          39.911601
        ],
        [
          32.710216,
          39.911615
        ],
        [
          32.711467,
          39.911689
        ],
        [
          32.71196,
          39.91171
        ],
        [
          32.713333,
          39.911737
        ],
        [
          32.713995,
          39.911715
        ],
        [
          32.714126,
          39.911693
        ],
        [
          32.714342,
          39.911658
        ],
        [
          32.714604,
          39.911609
        ],
        [
          32.714988,
          39.911514
        ],
        [
          32.715614,
          39.911291
        ],
        [
          32.721232,
          39.908879
        ],
        [
          32.721707,
          39.908724
        ],
        [
          32.723125,
          39.908418
        ],
        [
          32.724437,
          39.908311
        ],
        [
          32.72604,
          39.908414
        ],
        [
          32.727473,
          39.908744
        ],
        [
          32.731382,
          39.910234
        ]
      ]
    }

    const pwcMapControls = document.querySelector("pwc-map-controls");
    const geometry = [firstShape.geometry, secondShape.geometry];
    /**
    * We should wait till the web component ready
    */
    customElements.whenDefined('pwc-map').then(() => {
      const pwcMap = document.querySelector("pwc-map");

      /**
      * Get map instance
      */
      pwcMap.getMap().then((map) => {
        /**
        * Initialize pwc map controls with given map instance
        */
        pwcMapControls.initialize({ map: map.instance }, geometry);
      });
    });

    pwcMapControls.addEventListener("actions", (payload) => { console.log(payload.detail.action); console.log(JSON.stringify(payload.detail.data)) });
  </script>
</body>

</html>